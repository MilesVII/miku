{
  "version": 3,
  "sources": ["../../../src/prinzeugen/src/utils/utils.ts", "../../../src/prinzeugen/src/utils/io.ts", "../../../src/prinzeugen/src/utils/tabs.ts", "../../../src/prinzeugen/src/utils/curtain.ts", "../../../src/prinzeugen/src/utils/flicker.ts", "../../../src/prinzeugen/src/utils/console.ts", "../../../src/prinzeugen/src/utils/themes.ts", "../../../src/prinzeugen/src/utils/forms.ts", "../../../src/prinzeugen/src/utils/grabbers.ts", "../../../src/prinzeugen/src/moderation.ts", "../../../src/prinzeugen/src/grabbing.ts", "../../../src/prinzeugen/src/pool.ts", "../../../src/prinzeugen/src/main.ts"],
  "sourcesContent": ["\r\nexport async function callAPI(action: string, data: Record<string, any> | null, useLogin = true){\r\n\tfunction safeParse(str: string){\r\n\t\treturn safe(() => JSON.parse(str));\r\n\t}\r\n\r\n\tlet login = null;\r\n\tif (useLogin){\r\n\t\tconst loginData = load(\"login\");\r\n\t\tlogin = {\r\n\t\t\tuser: loginData.id,\r\n\t\t\tuserToken: loginData.token\r\n\t\t};\r\n\t} \r\n\r\n\tconst response = await fetch(\"/api/prinzeugen/main\", {\r\n\t\tmethod: \"POST\",\r\n\t\theaders: {\r\n\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t},\r\n\t\tbody: JSON.stringify(Object.assign({\r\n\t\t\taction: action\r\n\t\t}, data, login))\r\n\t});\r\n\r\n\tconst raw = await response.text();\r\n\tconst payload = safeParse(raw) || raw;\r\n\r\n\tif (response.status != 200) console.error(raw);\r\n\r\n\treturn {\r\n\t\tstatus: response.status,\r\n\t\theaders: response.headers,\r\n\t\tdata: payload\r\n\t};\r\n}\r\n\r\nexport function chunk<T>(a: T[], chunksize: number): T[][] {\r\n\tlet r: T[][] = [];\r\n\tfor (let i = 0; i < a.length; i += chunksize){\r\n\t\tr.push(a.slice(i, i + chunksize));\r\n\t}\r\n\treturn r;\r\n}\r\n\r\nexport function fromTemplate(id: string) {\r\n\treturn document.querySelector<HTMLTemplateElement>(`template#${id}`)?.content.cloneNode(true) ?? null;\r\n}\r\n\r\nexport function safe<T>(cb: () => T): T | null {\r\n\ttry {\r\n\t\treturn cb();\r\n\t} catch(e){\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\nexport function sleep(ms: number) {\r\n\treturn new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\nexport function gbToUnix(raw: string) {\r\n\tconst r = raw.split(\" \")\r\n\tconst fixed = `${r[2]} ${r[1]} ${r[5]} ${r[3]} GMT`;\r\n\treturn Date.parse(fixed);\r\n}\r\n\r\nexport function setElementValue(query: string, value: any, propertyName = \"value\") {\r\n\tconst e = document.querySelector(query);\r\n\tif (e === null) return;\r\n\t(e as any)[propertyName] = value;\r\n}\r\n\r\nexport function load(key: string) {\r\n\treturn JSON.parse(localStorage.getItem(key) || \"null\");\r\n}\r\n\r\nexport function save(key: string, data: any) {\r\n\tif (data)\r\n\t\tlocalStorage.setItem(key, JSON.stringify(data));\r\n\telse\r\n\t\tlocalStorage.removeItem(key);\r\n}\r\n", "type Mapping = {\r\n\tkeys: string[],\r\n\taction: () => void\r\n};\r\n\r\nexport function listenToKeyboard(preventDefault: boolean, mappings: Mapping[]){\r\n\tdocument.addEventListener(\"keydown\", e => {\r\n\t\tconst mapping = mappings.find(m => m.keys.includes(e.code));\r\n\t\tif (mapping) {\r\n\t\t\tif (preventDefault) e.preventDefault();\r\n\t\t\tmapping.action();\r\n\t\t}\r\n\t});\r\n}", "import { fromTemplate } from \"./utils\";\r\n\r\nexport function switchTabContent(group: string, target: string | null, content?: Node){\r\n\tconst container = document.querySelector<HTMLElement>(`*[data-tab-container=\"${group}\"]`);\r\n\tif (!container) {\r\n\t\tif (!target) return;\r\n\r\n\t\tconst variants = document.querySelectorAll<HTMLElement>(`*[data-tab-variant-group=\"${group}\"]`);\r\n\t\tif (variants.length === 0) return;\r\n\r\n\t\tvariants.forEach(v => {\r\n\t\t\tif (v.dataset.tabVariant === target) {\r\n\t\t\t\tv.classList.remove(\"hidden\");\r\n\t\t\t} else {\r\n\t\t\t\tv.classList.add(\"hidden\");\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn;\r\n\t};\r\n\tconst contents = target === null ? content : fromTemplate(`${group}-${target}`);\r\n\tif (!contents) return;\r\n\r\n\tconst storage = new DocumentFragment();\r\n\tstorage.append(...container.childNodes)\r\n\tcontainer.replaceChildren(contents);\r\n\tupdateTabListeners(container);\r\n\treturn storage;\r\n}\r\n\r\nexport function updateTabListeners(root: (HTMLElement | Document) = document){\r\n\tconst allTabs = root.querySelectorAll<HTMLElement>(\".tab\");\r\n\tallTabs.forEach(tab => {\r\n\t\tconst group = tab.dataset.tabGroup;\r\n\t\tconst tabId = tab.dataset.tabId;\r\n\t\tif (group === undefined || tabId === undefined) return;\r\n\r\n\t\tconst sibs = root.querySelectorAll(`.tab[data-tab-group=\"${group}\"]`);\r\n\t\ttab.addEventListener(\"click\", () => {\r\n\t\t\tif (tab.classList.contains(\"selected\")) return;\r\n\r\n\t\t\tsibs.forEach(t => t.classList.remove(\"selected\"));\r\n\t\t\ttab.classList.add(\"selected\");\r\n\t\t\tswitchTabContent(group, tabId);\r\n\t\t});\r\n\t});\r\n\r\n\troot.querySelectorAll<HTMLElement>(\"[data-tab-container]\").forEach(container => {\r\n\t\tconst tab = container.dataset.tabDefault;\r\n\t\tif (tab) {\r\n\t\t\tconst group = container.dataset.tabContainer;\r\n\t\t\tif (group === undefined) return;\r\n\r\n\t\t\tswitchTabContent(group, tab);\r\n\t\t}\r\n\t});\r\n}", "\r\nimport { switchTabContent } from \"./tabs\";\r\n\r\nlet pageLock = false;\r\nlet nodeStorage: Node | undefined;\r\n\r\nexport function pullCurtain(lock: boolean, message = \"Processing request\", noswitch = false){\r\n\tif (lock){\r\n\t\tif (pageLock) return false;\r\n\t\tpageLock = true;\r\n\r\n\t\tnodeStorage = switchTabContent(\"state\", \"curtain\");\r\n\r\n\t\tupdateCurtainMessage(message);\r\n\t} else {\r\n\t\tpageLock = false;\r\n\t\t\r\n\t\tif (!noswitch)\r\n\t\t\tswitchTabContent(\"state\", null, nodeStorage);\r\n\t\tnodeStorage = undefined;\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nexport function updateCurtainMessage(message: string){\r\n\tconst curtain = document.querySelector(\"#curtain\");\r\n\tif (curtain) curtain.textContent = message;\r\n}", "\r\ntype GenericFlickerCallback = (content: string) => [string, string | undefined];\r\nexport function genericFlickerUpdate(taQ: string, flQ: string, cb: GenericFlickerCallback, root: (Element | Document) = document) {\r\n\tconst textarea = root.querySelector<HTMLTextAreaElement>(taQ);\r\n\tconst flicker = root.querySelector<HTMLElement>(flQ);\r\n\tif (!flicker) return;\r\n\r\n\tconst contents = textarea?.value.trim() ?? \"\";\r\n\r\n\tconst [text, color = \"transparent\"] = cb(contents);\r\n\r\n\tflicker.textContent = text;\r\n\tflicker.style.backgroundColor = color;\r\n}", "export function init(){\r\n\tconst console = document.querySelector<HTMLElement>(\".console\");\r\n\tif (!console) return;\r\n\r\n\tconsole.addEventListener(\"toggle\", () => console.dataset.unread = \"0\");\r\n}\r\n\r\nexport function report(message: string) {\r\n\tconst console = document.querySelector<HTMLDetailsElement>(\"details.console\");\r\n\tif (!console) return;\r\n\r\n\tif (console.dataset.unread === undefined) console.dataset.unread = \"0\";\r\n\r\n\tif (!console.open)\r\n\t\tconsole.dataset.unread = `${parseInt(console.dataset.unread, 10) + 1}`;\r\n\r\n\tconst contents = console.querySelector(\"details > div\");\r\n\tif (!contents) return;\r\n\r\n\tconst entry = document.createElement(\"div\");\r\n\tentry.textContent = message;\r\n\r\n\tcontents.prepend(entry);\r\n}\r\n", "import { fromTemplate } from \"./utils\";\r\n\r\nexport function init() {\r\n\tconst theme = window.localStorage.getItem(\"theme\");\r\n\tif (theme) switchTheme(theme);\r\n}\r\n\r\nexport function selectorList() {\r\n\tconst rules: CSSStyleRule[] = []\r\n\tfor (const ss of document.styleSheets)\r\n\t\tif (ss.href?.startsWith(window.location.href)) {\r\n\t\t\tconst raw = [...ss.cssRules];\r\n\t\t\trules.push(...raw.filter(r => r.constructor.name === \"CSSStyleRule\") as any);\r\n\t\t}\r\n\t\r\n\t// @ts-ignore\r\n\tconst themes: RegExpMatchArray[] = rules\r\n\t\t.map(r => r.selectorText.match(/\\.theme-(.*)/))\r\n\t\t.filter(r => r);\r\n\t\r\n\tconst container = new DocumentFragment();\r\n\t// @ts-ignore\r\n\tcontainer.append(...themes.map(t => selectorItem(...t)));\r\n\treturn container;\r\n}\r\n\r\nfunction selectorItem(cssSelector: string, name: string){\r\n\tconst button = fromTemplate(\"theme-selector\");\r\n\tif (!button) return null;\r\n\tconst svg = (button as Element).firstElementChild;\r\n\tif (!svg) return null;\r\n\tconst themeClassName = `theme-${name}`;\r\n\tsvg.classList.add(themeClassName);\r\n\tsvg.addEventListener(\"click\", () => switchTheme(themeClassName))\r\n\treturn svg;\r\n}\r\n\r\nfunction switchTheme(themeClassName: string) {\r\n\tdocument.body.classList.forEach(c => {\r\n\t\tif (c.startsWith(\"theme-\")) document.body.classList.remove(c);\r\n\t});\r\n\tdocument.body.classList.add(themeClassName);\r\n\twindow.localStorage.setItem(\"theme\", themeClassName);\r\n}", "import { fromTemplate } from \"./utils\";\r\nimport { genericFlickerUpdate } from \"./flicker\";\r\n\r\nexport type FieldType = \"line\" | \"list\";\r\nexport type FieldSchema<T = Record<string, string>> = {\r\n\tkey: string,\r\n\ttype: FieldType,\r\n\tadditional: T\r\n}\r\nexport type FormSchema<T = Record<string, string>> = FieldSchema<T>[];\r\n\r\nexport function fieldSchema<T>(key: string, type: FieldType, additional: T): FieldSchema<T> {\r\n\treturn {\r\n\t\tkey,\r\n\t\ttype,\r\n\t\tadditional\r\n\t};\r\n}\r\n\r\nexport type PEFieldAdditionals = {\r\n\tlabel: string,\r\n\tplaceholder?: string,\r\n\tlineCount?: boolean\r\n};\r\n\r\nfunction fieldFromTemplate(field: FieldSchema<PEFieldAdditionals>){\r\n\tfunction getProto(id: string) {\r\n\t\tconst raw = fromTemplate(id);\r\n\t\tconst proto = (raw as HTMLElement)?.firstElementChild;\r\n\t\tif (proto){\r\n\t\t\treturn proto;\r\n\t\t} else {\r\n\t\t\tconsole.error(`Failed to render form field from template \"${id}\"`);\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\tswitch (field.type){\r\n\t\tcase (\"line\"): {\r\n\t\t\tconst templateName = \"generic-field-line\";\r\n\t\t\tconst proto = getProto(templateName);\r\n\t\t\tif (!proto) return null;\r\n\r\n\t\t\tconst label = proto.querySelector(\"label\");\r\n\t\t\tif (label) label.textContent = field.additional.label;\r\n\r\n\t\t\tconst input = proto.querySelector(\"input\");\r\n\t\t\tif (!input) {\r\n\t\t\t\tconsole.error(`Can't find <input> inside \"${templateName}\" template`);\r\n\t\t\t\treturn null;\r\n\t\t\t};\r\n\t\t\tinput.placeholder = field.additional.placeholder ?? \"\";\r\n\t\t\tinput.setAttribute(`data-grabber-form-${field.key}`, \"\");\r\n\r\n\t\t\treturn proto;\r\n\t\t}\r\n\t\tcase (\"list\"): {\r\n\t\t\tconst templateName = \"generic-field-multiline\";\r\n\t\t\tconst proto = getProto(templateName);\r\n\t\t\tif (!proto) return null;\r\n\r\n\t\t\tconst label = proto.querySelector(\"label\");\r\n\t\t\tif (label) label.textContent = field.additional.label;\r\n\r\n\t\t\tconst textarea = proto.querySelector(\"textarea\");\r\n\t\t\tif (!textarea) {\r\n\t\t\t\tconsole.error(`Can't find <textarea> inside \"${templateName}\" template`);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\ttextarea.placeholder = field.additional.placeholder ?? \"\";\r\n\t\t\ttextarea.setAttribute(`data-grabber-form-${field.key}`, \"\");\r\n\r\n\t\t\tif (field.additional.lineCount) {\r\n\t\t\t\tconst textareaFU = () => genericFlickerUpdate(\r\n\t\t\t\t\t\"textarea\",\r\n\t\t\t\t\t\"legend > span\",\r\n\t\t\t\t\t(content) => ([`${content.split(\"\\n\").filter(line => line.trim().length > 0).length}`, undefined]),\r\n\t\t\t\t\tproto\r\n\t\t\t\t);\r\n\t\t\t\ttextarea.addEventListener(\"input\", textareaFU);\r\n\t\t\t}\r\n\r\n\t\t\treturn proto;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function renderForm(schema: FormSchema<PEFieldAdditionals>): DocumentFragment {\r\n\tconst container = new DocumentFragment();\r\n\tconst rendered = schema\r\n\t\t.map(s => fieldFromTemplate(s))\r\n\t\t.filter(s => s !== null) as Element[];\r\n\tcontainer.append(...rendered);\r\n\treturn container;\r\n}\r\n\r\nexport function getFieldElement(container: HTMLElement, fieldKey: string) {\r\n\treturn container.querySelector(`*[data-grabber-form-${fieldKey}]`);\r\n}\r\n\r\nexport function readForm(container: HTMLElement, schema: FormSchema<PEFieldAdditionals>) {\r\n\tfunction readField(fieldKey: string, fieldType: string){\r\n\t\tconst fieldElement = getFieldElement(container, fieldKey);\r\n\t\tif (!fieldElement) return null;\r\n\r\n\t\treturn (fieldElement as any)?.value ?? null;\r\n\t}\r\n\r\n\tconst r: Record<string, string> = {};\r\n\r\n\tschema.forEach(s => {\r\n\t\tconst v = readField(s.key, s.type);\r\n\t\tr[s.key] = v;\r\n\t});\r\n\r\n\treturn r;\r\n}\r\n\r\nexport function fillForm(form: HTMLElement, data: Record<string, string>) {\r\n\tfor (const key of Object.keys(data)){\r\n\t\tconst field = getFieldElement(form, key);\r\n\t\tif (field) {\r\n\t\t\t(field as any).value = data[key];\r\n\t\t\tfield.dispatchEvent(new Event(\"input\"));\r\n\t\t}\r\n\t}\r\n\treturn form;\r\n}\r\n", "import * as forms from \"./forms\";\r\n\r\nfunction tagList(raw: string): string[] {\r\n\treturn raw\r\n\t\t.split(\"\\n\")\r\n\t\t.map(line => line.trim().replaceAll(\" \", \"_\"))\r\n\t\t.filter(tag => tag != \"\");\r\n}\r\n\r\nexport type Grabber = {\r\n\ttype: GrabberType,\r\n\tform: forms.FormSchema<forms.PEFieldAdditionals>,\r\n\tread: (container: HTMLElement) => any,\r\n\tfill: (container: HTMLElement, data: any) => void\r\n};\r\n\r\nexport const GLB_FORM: forms.FormSchema<forms.PEFieldAdditionals> = [\r\n\tforms.fieldSchema<forms.PEFieldAdditionals>(\"user\", \"line\", {\r\n\t\tlabel: \"Gelbooru user\"\r\n\t}),\r\n\tforms.fieldSchema<forms.PEFieldAdditionals>(\"api\", \"line\", {\r\n\t\tlabel: \"Gelbooru API key\"\r\n\t}),\r\n\tforms.fieldSchema<forms.PEFieldAdditionals>(\"tags\", \"list\", {\r\n\t\tlabel: \"Tags\",\r\n\t\tlineCount: true\r\n\t}),\r\n\tforms.fieldSchema<forms.PEFieldAdditionals>(\"whitelist\", \"list\", {\r\n\t\tlabel: \"Whitelist\",\r\n\t\tplaceholder: \"sort:id:asc and id:>lastseen are added autmoatically\",\r\n\t\tlineCount: true\r\n\t}),\r\n\tforms.fieldSchema<forms.PEFieldAdditionals>(\"blacklist\", \"list\", {\r\n\t\tlabel: \"Blacklist\",\r\n\t\tlineCount: true\r\n\t}),\r\n\tforms.fieldSchema<forms.PEFieldAdditionals>(\"lastSeen\", \"line\", {\r\n\t\tlabel: \"Last checked post ID\"\r\n\t})\r\n];\r\n\r\ntype GelbooruGrabberInstance = {\r\n\ttype: \"gelbooru\",\r\n\tcredentials: {\r\n\t\tuser: number,\r\n\t\ttoken: string\r\n\t},\r\n\tconfig: {\r\n\t\ttags: string[],\r\n\t\twhites: string[],\r\n\t\tblacks: string[],\r\n\t\tmoderated: boolean\r\n\t},\r\n\tstate: {\r\n\t\tlastSeen: number\r\n\t}\r\n};\r\n\r\nconst GelbooruGrabber: Grabber = {\r\n\ttype: \"gelbooru\",\r\n\tform: GLB_FORM,\r\n\tread: container => {\r\n\t\tconst formData = forms.readForm(container, GLB_FORM);\r\n\t\tconst instance: GelbooruGrabberInstance = {\r\n\t\t\ttype: \"gelbooru\",\r\n\t\t\tcredentials: {\r\n\t\t\t\tuser: parseInt(formData.user?.trim() ?? \"0\", 10),\r\n\t\t\t\ttoken: formData.api?.trim()\r\n\t\t\t},\r\n\t\t\tconfig: {\r\n\t\t\t\ttags: formData.tags ? tagList(formData.tags) : [\"\"],\r\n\t\t\t\twhites: formData.whitelist ? tagList(formData.whitelist) : [\"\"],\r\n\t\t\t\tblacks: formData.blacklist ? tagList(formData.blacklist) : [\"\"],\r\n\t\t\t\tmoderated: true\r\n\t\t\t},\r\n\t\t\tstate: {\r\n\t\t\t\tlastSeen: parseInt(formData.lastSeen ?? \"0\", 10)\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn instance;\r\n\t},\r\n\tfill: (container, data: GelbooruGrabberInstance) => {\r\n\t\tconst formData = {\r\n\t\t\tuser: `${data.credentials.user}`,\r\n\t\t\tapi: data.credentials.token,\r\n\r\n\t\t\ttags: data.config.tags.join(\"\\n\"),\r\n\t\t\tblacklist: data.config.blacks.join(\"\\n\"),\r\n\t\t\twhitelist: data.config.whites.join(\"\\n\"),\r\n\r\n\t\t\tlastSeen: `${data.state.lastSeen}`\r\n\t\t};\r\n\t\tforms.fillForm(container, formData);\r\n\r\n\t\t// forms.getFieldElement(\"tags\")?.addEventListener(\"input\", () => updateGrabberFlicker(el));\r\n\t\t// forms.getFieldElement(\"blacklist\")?.addEventListener(\"input\", () => updateGrabberFlicker(el));\r\n\t}\r\n}\r\n// function updateGrabberFlicker(el: HTMLElement) {\r\n// \tgenericFlickerUpdate(\"#gb_tags\", \"#gb_tflicker\", contents => [contents.split(\"\\n\").length], el);\r\n// \tgenericFlickerUpdate(\"#gb_blacks\", \"#gb_bflicker\", contents => [contents.split(\"\\n\").length], el);\r\n// }\r\n\r\nexport const Grabbers = {\r\n\t\"gelbooru\": GelbooruGrabber\r\n};\r\n\r\nexport type GrabberType = keyof typeof Grabbers;", "import { callAPI, fromTemplate, sleep, chunk } from \"./utils/utils\";\r\nimport { pullCurtain } from \"./utils/curtain\";\r\n\r\nexport async function downloadModerables(){\r\n\tconst messages = await callAPI(\"getModerables\", null, true);\r\n\tif (messages.status == 200)\r\n\t\treturn messages.data;\r\n\telse\r\n\t\treturn null;\r\n}\r\n\r\nexport async function reloadModerables(){\r\n\tpullCurtain(true);\r\n\tconst messages = await downloadModerables();\r\n\tpullCurtain(false);\r\n\tif (messages) displayModerables(messages);\r\n}\r\n\r\nexport function displayModerables(messages: any[]){\r\n\tconst list = document.querySelector(\"#moderables-list\");\r\n\tif (!list) return;\r\n\tlist.innerHTML = \"\";\r\n\tmessages.forEach(m => {\r\n\t\tconst item = renderModerable(m.message, m.id);\r\n\t\tif (item) list.append(item);\r\n\t});\r\n}\r\n\r\nfunction renderModerable(message: any, id: string){\r\n\tif (message.version != 3){\r\n\t\tconsole.error(\"Unsupported message version\");\r\n\t\treturn;\r\n\t}\r\n\r\n\tconst proto = (fromTemplate(\"generic-moderable\") as Element)?.firstElementChild as HTMLElement;\r\n\tif (!proto) return;\r\n\r\n\tproto.dataset.id = id;\r\n\tproto.dataset.original = message.content;\r\n\tif (message.cached) proto.dataset.upscaled = \"weewee\";\r\n\r\n\tproto.addEventListener(\"click\", () => proto.focus());\r\n\r\n\tconst preview = message.cached ? message.cachedContent.preview : message.preview;\r\n\tconst source = message.links[0].url;\r\n\r\n\tconst link = proto.querySelector(\"a\");\r\n\tif (link) link.href = source;\r\n\tconst image = proto.querySelector(\"img\");\r\n\tif (image) image.src = preview;\r\n\r\n\tfunction renderTag(text: string, color: string){\r\n\t\tconst e = document.createElement(\"div\");\r\n\t\te.className = \"rounded bordered padded\";\r\n\t\te.textContent = text;\r\n\t\te.style.backgroundColor = color;\r\n\t\treturn e;\r\n\t}\r\n\tconst tags = proto.querySelector(\".moderable-info\");\r\n\tif (tags){\r\n\t\tif (message.artists)\r\n\t\t\tmessage.artists.forEach((artist: string) =>\r\n\t\t\t\ttags.append(renderTag(`\uD83C\uDFA8 ${artist}`, \"transparent\"))\r\n\t\t\t);\r\n\t\tif (message.nsfw)\r\n\t\t\ttags.append(renderTag(\"NSFW\", \"rgba(200, 0, 0, .3\"));\r\n\t\tif (message.tags?.includes(\"animated\"))\r\n\t\t\ttags.append(renderTag(\"animated\", \"rgba(50, 50, 200, .3\"));\r\n\t\tif (message.tags?.includes(\"animated_gif\"))\r\n\t\t\ttags.append(renderTag(\"GIF\", \"rgba(50, 50, 200, .3\"));\r\n\t\tif (message.tags?.includes(\"video\"))\r\n\t\t\ttags.append(renderTag(\"video\", \"rgba(50, 50, 200, .3\"));\r\n\t}\r\n\r\n\tproto.querySelectorAll<HTMLElement>(\"[data-moderable-button]\").forEach(b => {\r\n\t\tif (b.dataset.moderableButton === \"approve\"){\r\n\t\t\tb.addEventListener(\"click\", e => {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tproto.classList.remove(\"rejected\");\r\n\t\t\t\tproto.classList.add(\"approved\");\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tb.addEventListener(\"click\", e => {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\tproto.classList.add(\"rejected\");\r\n\t\t\t\tproto.classList.remove(\"approved\");\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\tproto.addEventListener(\"focusin\", () => proto.scrollIntoView({/*behavior: \"smooth\", */block: \"center\"}));\r\n\tproto.addEventListener(\"mousedown\", e => e.preventDefault());\r\n\r\n\treturn proto;\r\n}\r\n\r\nconst UPSCALE_RETRY_COUNT = 3;\r\nexport async function upscalePreviews(){\r\n\tasync function upscale(e: HTMLElement, retriesLeft = UPSCALE_RETRY_COUNT){\r\n\t\tif (e.dataset.upscaled && retriesLeft === UPSCALE_RETRY_COUNT) return;\r\n\t\te.dataset.upscaled = \"weewee\";\r\n\r\n\t\tconst url = `/api/imgproxy/?j=1&w=0&url=${e.dataset.original}`;\r\n\t\tconst response = await fetch(url);\r\n\t\tif (response.status === 504) {\r\n\t\t\tif (retriesLeft <= 0) return;\r\n\t\t\tawait sleep(Math.random() * 5000);\r\n\t\t\tawait upscale(e, retriesLeft - 1);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!response.ok) return;\r\n\t\tif (!response.headers.get(\"content-type\")?.startsWith(\"image/\")) return;\r\n\r\n\t\tconst data = await response.arrayBuffer();\r\n\t\tconst blob = new Blob([data]);\r\n\r\n\t\tconst image = e.querySelector(\"img\");\r\n\t\tif (image) image.src = URL.createObjectURL(blob);\r\n\t}\r\n\r\n\tconst moderables = Array.from(document.querySelectorAll<HTMLElement>(\".moderable\"));\r\n\tconst chomnks = chunk(moderables, 7);\r\n\tfor (const chonk of chomnks) {\r\n\t\tconst scaleJobs = chonk.map(e => upscale(e));\r\n\t\tawait Promise.allSettled(scaleJobs);\r\n\t};\r\n}\r\n\r\nexport function fixFocus(){\r\n\tconst target = document.querySelector<HTMLElement>(\".moderable:not(.approved):not(.rejected)\");\r\n\tif (target)\r\n\t\ttarget.focus();\r\n\telse\r\n\t\tdocument.querySelector<HTMLElement>(\".moderable\")?.focus();\r\n}\r\n\r\nexport function decide(approve: boolean){\r\n\tconst focused = document.activeElement;\r\n\tif (!focused?.classList.contains(\"moderable\")) return;\r\n\r\n\tconst buttonQuery = `button[data-moderable-button=\"${approve ? \"approve\" : \"reject\"}\"]`;\r\n\tfocused.querySelector<HTMLButtonElement>(buttonQuery)?.click();\r\n\r\n\tconst nextSib = focused.nextElementSibling as HTMLElement;\r\n\tif (nextSib?.classList.contains(\"moderable\"))\r\n\t\tnextSib.focus();\r\n\telse\r\n\t\tdocument.querySelector(\"#moderables-submit\")?.scrollIntoView({behavior: \"smooth\", block: \"center\"});\r\n}\r\n\r\nexport async function moderate(){\r\n\tconst decisionsCards = document.querySelectorAll<HTMLElement>(\".moderable.approved, .moderable.rejected\");\r\n\tconst decisions = Array.from(decisionsCards).map(d => ({\r\n\t\tid: parseInt(d.dataset.id ?? \"\", 10),\r\n\t\tapproved: d.classList.contains(\"approved\")\r\n\t}));\r\n\tif (decisions.length == 0) return;\r\n\r\n\tpullCurtain(true);\r\n\tconst newModerables = await callAPI(\"moderate\", {decisions: decisions}, true);\r\n\t\r\n\tpullCurtain(false);\r\n\tdisplayModerables(newModerables.data);\r\n}\r\n", "import { callAPI, fromTemplate } from \"./utils/utils\";\r\nimport { Grabbers } from \"./utils/grabbers\";\r\nimport type { Grabber, GrabberType } from \"./utils/grabbers\"\r\nimport { pullCurtain, updateCurtainMessage } from \"./utils/curtain\";\r\nimport { report } from \"./utils/console\";\r\nimport { downloadModerables, displayModerables } from \"./moderation\";\r\n\r\nimport * as forms from \"./utils/forms\";\r\n\r\nexport async function downloadGrabbers(): Promise<any[] | null> {\r\n\tconst grabbers = await callAPI(\"getGrabbers\", {}, true);\r\n\tif (grabbers.status == 200)\r\n\t\treturn grabbers.data;\r\n\telse\r\n\t\treturn null;\r\n}\r\n\r\nexport function displayGrabbers(grabs: any[]){\r\n\tconst list = document.querySelector<HTMLElement>(\"#grabbers-list\");\r\n\tif (!list) return;\r\n\tlist.innerHTML = \"\";\r\n\r\n\tgrabs.forEach((g, i) => {\r\n\t\tconst meta: Grabber = Grabbers[g.type as GrabberType];\r\n\t\tconst proto = renderGrabber(g.type, i);\r\n\t\tif (!proto) return;\r\n\r\n\t\tmeta.fill(proto, g);\r\n\r\n\t\tlist.appendChild(proto);\r\n\t});\r\n}\r\n\r\nexport async function batchGrab(){\r\n\tpullCurtain(true);\r\n\tconst grabbersReference = await downloadGrabbers();\r\n\tif (!grabbersReference) {\r\n\t\tpullCurtain(false);\r\n\t\treturn;\r\n\t}\r\n\tlet newRowsCount = 0;\r\n\tfor (let i = 0; i < grabbersReference.length; ++i){\r\n\t\tupdateCurtainMessage(`Grabbing: ${i} / ${grabbersReference.length} done`);\r\n\t\tconst response = await callAPI(\"grab\", {id: i}, true);\r\n\t\tif (response.status != 200){\r\n\t\t\treport(`Grab #${i} failed`);\r\n\t\t\tconsole.error(response);\r\n\t\t} else\r\n\t\t\tnewRowsCount += parseInt(response.data, 10) || 0;\r\n\t}\r\n\treport(`${newRowsCount} new entries`);\r\n\r\n\tafterGrab();\r\n}\r\n\r\nexport async function selectiveGrab(grabberId: number, batchSize?: number){\r\n\tpullCurtain(true);\r\n\r\n\tconst params = {\r\n\t\tid: grabberId,\r\n\t\t...(batchSize ? {batchSize: batchSize} : {})\r\n\t};\r\n\r\n\tupdateCurtainMessage(`Grabbing #${grabberId}`);\r\n\tconst response = await callAPI(\"grab\", params, true);\r\n\tif (response.status != 200){\r\n\t\treport(`Grab #${grabberId} failed`);\r\n\t\tconsole.error(response);\r\n\t} else\r\n\t\treport(`${response.data} new entries`);\r\n\r\n\tafterGrab();\r\n}\r\n\r\nasync function afterGrab(){\r\n\tupdateCurtainMessage(`Updating state`);\r\n\tconst updateGrabbers = await downloadGrabbers();\r\n\tconst updateModerables = await downloadModerables();\r\n\r\n\tpullCurtain(false);\r\n\r\n\tif (updateGrabbers) displayGrabbers(updateGrabbers);\r\n\tif (updateModerables) displayModerables(updateModerables);\r\n}\r\n\r\nexport async function saveGrabbers(){\r\n\tconst list = document.querySelector<HTMLElement>(\"#grabbers-list\");\r\n\tconst grabs = Array.from(list?.children ?? [])\r\n\t\t.map(el => {\r\n\t\t\tconst container = el as HTMLElement;\r\n\t\t\treturn Grabbers[container?.dataset.grabberForm as GrabberType].read(container)\r\n\t\t});\r\n\t\r\n\r\n\tpullCurtain(true);\r\n\tconst response = await callAPI(\"setGrabbers\", {\r\n\t\tgrabbers: grabs\r\n\t});\r\n\r\n\tconst updateGrabbers = response.status === 200 ? await downloadGrabbers() : null;\r\n\tpullCurtain(false);\r\n\tif (updateGrabbers) displayGrabbers(updateGrabbers);\r\n}\r\n\r\nexport function addGrabber(type: GrabberType){\r\n\tconst list = document.querySelector(\"#grabbers-list\");\r\n\tconst proto = renderGrabber(type);\r\n\tif (proto && list) list.appendChild(proto);\r\n}\r\n\r\nexport function renderGrabber(type: GrabberType, index?: number) {\r\n\tconst meta = Grabbers[type];\r\n\tif (!meta) return null;\r\n\r\n\tconst proto = (fromTemplate(\"generic-grabber\") as Element)?.firstElementChild as HTMLElement;\r\n\tif (!proto) return null;\r\n\tconst buttons = proto.querySelector(\"div\");\r\n\tif (!buttons) return null;\r\n\r\n\tproto.dataset.grabberForm = type;\r\n\r\n\tproto.appendChild(forms.renderForm(meta.form));\r\n\r\n\tconst [grab, less, remv] = [\r\n\t\tbuttons.querySelector<HTMLButtonElement>(`[data-grabber-button=\"grab\"]`),\r\n\t\tbuttons.querySelector<HTMLButtonElement>(`[data-grabber-button=\"less\"]`),\r\n\t\tbuttons.querySelector<HTMLButtonElement>(`[data-grabber-button=\"remv\"]`)\r\n\t];\r\n\r\n\tremv?.addEventListener(\"click\", () => {\r\n\t\tproto.remove();\r\n\t});\r\n\r\n\tif (index === undefined){\r\n\t\tconst hint = document.createElement(\"div\");\r\n\t\thint.textContent = \"Save grabbers before grabbing\";\r\n\t\tproto.insertBefore(hint, proto.children[0]);\r\n\t\tif (grab) grab.disabled = true;\r\n\t\tif (less) less.disabled = true;\r\n\t} else {\r\n\t\tif (grab) grab.addEventListener(\"click\", () => selectiveGrab(index));\r\n\t\tif (less) less.addEventListener(\"click\", () => selectiveGrab(index, 50));\r\n\t}\r\n\t\r\n\tproto.appendChild(buttons);\r\n\r\n\treturn proto as HTMLElement;\r\n}", "import { callAPI, fromTemplate } from \"./utils/utils\";\r\nimport { pullCurtain } from \"./utils/curtain\";\r\n\r\nconst PLACEHOLDER_URL = \"placeholder.png\";\r\nexport async function loadMessagePool(page = 0){\r\n\tconst STRIDE = 64;\r\n\tconst container = document.querySelector(\"#pool-content\");\r\n\tif (!container) return;\r\n\r\n\tconst pager = document.querySelector(\"#pool-pagination\");\r\n\tif (!pager) return;\r\n\r\n\tcontainer.innerHTML = \"\";\r\n\r\n\tpullCurtain(true);\r\n\tconst rows = await callAPI(\"getPoolPage\", {\r\n\t\tpage: page,\r\n\t\tstride: STRIDE\r\n\t}, true);\r\n\tpullCurtain(false);\r\n\r\n\tfor (let row of rows.data){\r\n\t\tconst proto = (fromTemplate(\"generic-pool-item\") as Element)?.firstElementChild as HTMLElement;\r\n\t\tif (!proto) return;\r\n\r\n\t\tproto.dataset.id = row.id;\r\n\t\tconst img = proto.querySelector(\"img\");\r\n\t\tif (!img) return;\r\n\r\n\t\timg.title = generateTitle(row);\r\n\r\n\t\tif (row.message.version == 1){\r\n\t\t\timg.src = row.message.raw?.preview || row.message.image[0];\r\n\t\t} else if (row.message.version == 3) {\r\n\t\t\timg.src = row.message.cached ? row.message.cachedContent.preview : row.message.preview;\r\n\t\t} else {\r\n\t\t\timg.src = PLACEHOLDER_URL;\r\n\t\t}\r\n\t\tproto.addEventListener(\"click\", () => setPreviewPost(row));\r\n\t\t\r\n\t\tcontainer.append(proto);\r\n\t}\r\n\r\n\tpager.innerHTML = \"\";\r\n\tconst postCount = rows.data[0]?.total || 0;\r\n\tconst pageCount = Math.ceil(postCount / STRIDE);\r\n\tfor (let i = 0; i < pageCount; ++i){\r\n\t\tconst pageSelector = document.createElement(\"button\");\r\n\t\tpageSelector.textContent = `${i + 1}`;\r\n\t\tpageSelector.addEventListener(\"click\", () => loadMessagePool(i));\r\n\t\tpager.appendChild(pageSelector);\r\n\t}\r\n}\r\n\r\nfunction setPreviewPost(row: any){\r\n\tconst dialog = document.querySelector<HTMLDialogElement>(\"dialog#pool-preview\");\r\n\tif (!dialog) return;\r\n\r\n\tconst picture = dialog.querySelector(\"img\");\r\n\tif (!picture) return;\r\n\r\n\tif (row.message.version == 3){\r\n\t\tpicture.src = row.message.cached ? row.message.cachedContent.preview : row.message.preview;\r\n\t} else {\r\n\t\tpicture.src = row ? row.message.raw.preview || row.message.image[0] : PLACEHOLDER_URL;\r\n\t}\r\n\r\n\tpicture.title = generateTitle(row);\r\n\r\n\tconst controls = dialog.querySelector(\"#pool-preview-controls\");\r\n\tif (!controls) return;\r\n\tcontrols.innerHTML = \"\";\r\n\r\n\tfunction button(caption: string, action: () => void) {\r\n\t\tconst b = document.createElement(\"button\");\r\n\t\tb.textContent = caption;\r\n\t\tb.addEventListener(\"click\", action);\r\n\t\treturn b;\r\n\t}\r\n\t\r\n\tconst linkset: {text: string, url: string}[] = (row.message?.links || []);\r\n\tconst links = linkset.map(link => {\r\n\t\tconst anchor = document.createElement(\"a\");\r\n\t\tanchor.textContent = link.text;\r\n\t\tanchor.href = link.url;\r\n\t\tanchor.classList.add(\"clickable\");\r\n\t\tanchor.target = \"_blank\";\r\n\t\treturn anchor;\r\n\t});\r\n\r\n\tcontrols.append(\r\n\t\t...links,\r\n\t\tbutton(\"Unschedule\", () => unschedulePost(row.id).then(() => dialog.close())),\r\n\t\tbutton(\"Show item details in console\", () => console.log(row))\r\n\t);\r\n\r\n\tdialog.showModal();\r\n}\r\n\r\nasync function unschedulePost(rowId: number){\r\n\tpullCurtain(true);\r\n\tconst response = await callAPI(\"unschedulePost\", {\r\n\t\tid: rowId\r\n\t}, true);\r\n\tpullCurtain(false);\r\n\r\n\tif (response.status < 300){\r\n\t\tconst target = document.querySelector(`.pool-item[data-id=\"${rowId}\"]`);\r\n\t\tif (target) target.classList.add(\"hidden\");\r\n\t}\r\n}\r\n\r\nfunction generateTitle(row: any){\r\n\treturn [\r\n\t\trow.message.artists?.join(\" \"),\r\n\t\trow.message.tags?.join(\" \"),\r\n\t].join(\"\\n\");\r\n}\r\n", "import { callAPI, safe, setElementValue, load, save, fromTemplate } from \"./utils/utils\";\r\nimport type { GrabberType } from \"./utils/grabbers\"\r\nimport { listenToKeyboard } from \"./utils/io\";\r\nimport { updateTabListeners, switchTabContent } from \"./utils/tabs\";\r\nimport { pullCurtain } from \"./utils/curtain\";\r\nimport { genericFlickerUpdate } from \"./utils/flicker\";\r\nimport { init as initConsole, report } from \"./utils/console\";\r\nimport { init as initTheme, selectorList as themeSelectorList } from \"./utils/themes\";\r\n\r\nimport { addGrabber, saveGrabbers, displayGrabbers, batchGrab } from \"./grabbing\";\r\nimport { decide, fixFocus, upscalePreviews, displayModerables, moderate, reloadModerables } from \"./moderation\";\r\nimport { loadMessagePool } from \"./pool\";\r\n\r\nmain();\r\n\r\nasync function main(){\r\n\tinitTheme();\r\n\r\n\tupdateTabListeners();\r\n\r\n\twindow.addEventListener(\"error\", (event) => {\r\n\t\treport(`${event.message}\\n\\n${event.filename} ${event.lineno}:${event.colno}`);\r\n\t});\r\n\tdocument.querySelector(\"#form-login\")?.addEventListener(\"submit\", e => login(e));\r\n\r\n\tconst loginData = load(\"login\");\r\n\tif (loginData != null){\r\n\t\tpullCurtain(true, \"Loading\");\r\n\t\tconst loginResponse = await callAPI(\"login\", {\r\n\t\t\tuser: loginData.id,\r\n\t\t\tuserToken: loginData.token\r\n\t\t}, false);\r\n\r\n\t\tpullCurtain(false);\r\n\r\n\t\tif (loginResponse.status == 200)\r\n\t\t\tauthorize(loginResponse.data);\r\n\t}\r\n\r\n\tlistenToKeyboard(false, [\r\n\t\t{\r\n\t\t\tkeys: [\"Comma\"],\r\n\t\t\taction: () => decide(true)\r\n\t\t},\r\n\t\t{\r\n\t\t\tkeys: [\"Period\"],\r\n\t\t\taction: () => decide(false)\r\n\t\t},\r\n\t\t{\r\n\t\t\tkeys: [\"Digit0\"],\r\n\t\t\taction: () => upscalePreviews()\r\n\t\t},\r\n\t\t{\r\n\t\t\tkeys: [\"ShiftRight\", \"KeyM\"],\r\n\t\t\taction: () => fixFocus()\r\n\t\t}\r\n\t]);\r\n}\r\n\r\nasync function authorize(userData: any){\r\n\tswitchTabContent(\"state\", \"online\");\r\n\r\n\tsetElementValue(\"#settings-password\", \"\");\r\n\tsetElementValue(\"#settings-tg-token\", userData.tg_token);\r\n\tsetElementValue(\"#settings-additional\", userData.additional);\r\n\tdocument\r\n\t\t.querySelector<HTMLTextAreaElement>(\"#settings-additional\")\r\n\t\t?.addEventListener(\"input\", updateSettingsFlicker);\r\n\tupdateSettingsFlicker();\r\n\r\n\tdocument\r\n\t\t.querySelectorAll<HTMLElement>(\"[data-add-grabber]\")\r\n\t\t.forEach(b =>\r\n\t\t\tb.addEventListener(\"click\", () => {\r\n\t\t\t\tif (b.dataset.addGrabber === undefined) return;\r\n\t\t\t\taddGrabber(b.dataset.addGrabber as GrabberType)\r\n\t\t\t})\r\n\t\t);\r\n\r\n\tfunction addClick(query: string, action: () => void) {\r\n\t\tdocument\r\n\t\t\t.querySelector<HTMLElement>(query)\r\n\t\t\t?.addEventListener(\"click\", action);\r\n\t}\r\n\taddClick(\"#dashboard-grab\", batchGrab);\r\n\taddClick(\"#grabbers-save\", saveGrabbers);\r\n\taddClick(\"#moderables-reload\", reloadModerables);\r\n\taddClick(\"#moderables-upscale\", upscalePreviews);\r\n\taddClick(\"#moderables-submit\", moderate);\r\n\taddClick(\"#pool-load\", () => loadMessagePool());\r\n\taddClick(\"#settings-save\", saveSettings);\r\n\taddClick(\"#settings-signout\", signOut);\r\n\r\n\tinitConsole();\r\n\r\n\tdocument.querySelector(\"#settings-theme\")?.append(themeSelectorList());\r\n\r\n\tdisplayGrabbers(userData.grabbers);\r\n\tdisplayModerables(userData.moderables);\r\n\r\n\treport(`Welcome back, ${userData.name}. You have ${userData.stats.approved} post${userData.stats.approved == 1 ? \"\" : \"s\"} in pool, ${userData.stats.pending} pending moderation, ${userData.stats.failed} failed`);\r\n}\r\n\r\nasync function login(e: Event){\r\n\te.preventDefault();\r\n\tconst id = document.querySelector<HTMLInputElement>(\"#login-id\")?.value;\r\n\tconst token = document.querySelector<HTMLInputElement>(\"#login-token\")?.value ?? \"\";\r\n\r\n\tif (!id) return;\r\n\r\n\tif (!pullCurtain(true)) return;\r\n\r\n\tconst parsedId = safe(() => parseInt(id, 10)) || 0;\r\n\tconst response = await callAPI(\"login\", {\r\n\t\tuser: parsedId,\r\n\t\tuserToken: token\r\n\t}, false);\r\n\r\n\tpullCurtain(false);\r\n\tif (response.status == 200) {\r\n\t\tsave(\"login\", {\r\n\t\t\tid: parsedId,\r\n\t\t\ttoken: token\r\n\t\t});\r\n\t\tauthorize(response.data);\r\n\t}\r\n\r\n\treturn false;\r\n}\r\n\r\nlet wipeLock = true;\r\nasync function wipePool(){\r\n\tif (wipeLock){\r\n\t\twipeLock = false;\r\n\t\tconsole.log(\"safety off. call function again to wipe current pool\");\r\n\t} else {\r\n\t\twipeLock = true;\r\n\t\tpullCurtain(true);\r\n\t\tconst wipeResponse = await callAPI(\"wipePool\", {}, true);\r\n\t\tpullCurtain(false);\r\n\t\tif (wipeResponse.status === 200)\r\n\t\t\tlocation.reload();\r\n\t}\r\n}\r\n\r\nfunction updateSettingsFlicker(){\r\n\tgenericFlickerUpdate(\"#settings-additional\", \"#settings-flicker\",\r\n\t\tcontents => {\r\n\t\t\tif (contents){\r\n\t\t\t\tconst parsed = safe(() => JSON.parse(contents));\r\n\t\t\t\tif (parsed === null){\r\n\t\t\t\t\treturn [\"Not JSON\", \"hsla(20, 72%, 23%, .42)\"];\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn [\"JSON\", \"hsla(100, 72%, 23%, .42)\"];\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn [\"Empty\", \"hsla(0, 0%, 60%, .42)\"];\r\n\t\t\t}\r\n\t\t}\r\n\t);\r\n}\r\n\r\nasync function saveSettings(){\r\n\tconst newPassword = document.querySelector<HTMLInputElement>(\"#settings-password\")?.value.trim() || null;\r\n\tconst tgToken = document.querySelector<HTMLInputElement>(\"#settings-tg-token\")?.value || null;\r\n\tconst additionals = document.querySelector<HTMLTextAreaElement>(\"#settings-additional\")?.value ?? \"\";\r\n\r\n\tpullCurtain(true);\r\n\tawait callAPI(\"saveSettings\", {\r\n\t\tnewUserToken: newPassword,\r\n\t\tnewTgToken: tgToken,\r\n\t\tadditionalData: additionals\r\n\t}, true);\r\n\tpullCurtain(false);\r\n\tif (newPassword) signOut();\r\n}\r\n\r\nfunction signOut(){\r\n\tsave(\"login\", null);\r\n\tswitchTabContent(\"state\", \"login\");\r\n}\r\n"],
  "mappings": "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",
  "names": ["login", "console", "init", "init"]
}
